1
00:00:02,170 --> 00:00:05,660
Vuex 提供的一个非常不错的功能

2
00:00:05,660 --> 00:00:08,980
随着您的商店以及您的州和地区的发展

3
00:00:08,980 --> 00:00:13,660
是设置模块的可能性。

4
00:00:13,660 --> 00:00:17,023
将您的商店拆分为多个模块。

5
00:00:17,880 --> 00:00:21,550
每个应用程序可能只有一个商店，

6
00:00:21,550 --> 00:00:26,520
但是这个商店可以由多个模块组成

7
00:00:26,520 --> 00:00:29,300
使您的代码更易于管理。

8
00:00:29,300 --> 00:00:32,240
如果您不设置任何模块，您会自动

9
00:00:32,240 --> 00:00:34,690
有一个模块，你可以说，

10
00:00:34,690 --> 00:00:37,210
根模块，根状态，

11
00:00:37,210 --> 00:00:41,330
但是您可以根据需要添加任意数量的其他模块。

12
00:00:41,330 --> 00:00:44,100
例如一个计数器模块

13
00:00:44,100 --> 00:00:47,900
和另一个用于身份验证的模块。

14
00:00:47,900 --> 00:00:51,430
或者您将身份验证保留在根状态，

15
00:00:51,430 --> 00:00:54,520
在根模块中并外包计数器

16
00:00:54,520 --> 00:00:56,410
进入一个额外的模块。

17
00:00:56,410 --> 00:00:58,080
这也是可能的。

18
00:00:58,080 --> 00:01:00,030
这就是我们要在这里做的。

19
00:01:00,880 --> 00:01:02,650
所以仍然在 main.js 中，

20
00:01:02,650 --> 00:01:05,069
我要创建一个新的counterModule，

21
00:01:07,410 --> 00:01:10,950
这是一个对象，而不是一个商店，

22
00:01:10,950 --> 00:01:14,430
只是一个普通的 JavaScript 对象。

23
00:01:14,430 --> 00:01:17,840
但现在它是一个具有完全相同特征的物体

24
00:01:17,840 --> 00:01:20,980
作为您传递给创建商店的对象。

25
00:01:20,980 --> 00:01:23,730
所以它可能有一个状态方法。

26
00:01:23,730 --> 00:01:26,720
它可能有突变，这是一个对象。

27
00:01:26,720 --> 00:01:30,610
它可能有动作，这是一个对象和吸气剂。

28
00:01:30,610 --> 00:01:32,593
所以完全相同的功能。

29
00:01:34,600 --> 00:01:37,343
而在状态中，我们当然也返回一个对象。

30
00:01:38,620 --> 00:01:42,080
但是现在我们可以在这里移动我们的计数器状态

31
00:01:42,080 --> 00:01:46,060
走出这个全球商店，进入这个柜台模块。

32
00:01:47,380 --> 00:01:50,710
与我们的计数器相关的突变也是如此，

33
00:01:50,710 --> 00:01:54,653
抓住它们并将它们移到这里变成突变体。

34
00:01:56,500 --> 00:01:58,350
当然，动作也是一样的，

35
00:01:58,350 --> 00:02:01,220
抢柜台相关动作，

36
00:02:01,220 --> 00:02:03,430
从我们的全球商店中删除它们，

37
00:02:03,430 --> 00:02:05,063
并将它们添加到此处的操作中。

38
00:02:06,090 --> 00:02:10,190
你猜对我们的吸气剂也是一样的，

39
00:02:10,190 --> 00:02:11,930
抓住柜台吸气剂，

40
00:02:11,930 --> 00:02:13,853
从全局存储中删除它们，

41
00:02:14,970 --> 00:02:16,663
并将它们添加到这里的吸气剂。

42
00:02:18,330 --> 00:02:23,330
有了这个，我们的全球商店，我们的主要商店，就更精简了。

43
00:02:24,640 --> 00:02:27,600
它现在只剩下 Authlogic。

44
00:02:27,600 --> 00:02:31,360
我们也可以把这个逻辑放到一个单独的模块中，

45
00:02:31,360 --> 00:02:32,363
如果我们愿意。

46
00:02:34,050 --> 00:02:37,853
但是我们现在如何将模块放回商店呢？

47
00:02:38,870 --> 00:02:41,860
嗯，createStore，这个对象在这里

48
00:02:41,860 --> 00:02:46,000
还需要一个模块选项。

49
00:02:46,000 --> 00:02:48,970
模块是一个对象。

50
00:02:48,970 --> 00:02:52,050
现在在这里添加所有模块

51
00:02:52,050 --> 00:02:54,603
你想合并成一家商店。

52
00:02:55,710 --> 00:02:59,800
你给每个模块一个你选择的标识符，

53
00:02:59,800 --> 00:03:04,760
例如，计数器或数字

54
00:03:04,760 --> 00:03:07,440
或者无论名称应该是什么，这取决于您。

55
00:03:07,440 --> 00:03:09,190
在这里，我将使用数字

56
00:03:10,240 --> 00:03:14,000
然后指向应该合并的模块对象。

57
00:03:14,000 --> 00:03:16,163
在这种情况下，计数器模块。

58
00:03:19,210 --> 00:03:20,043
像这样。

59
00:03:21,050 --> 00:03:24,053
现在这将被合并到这家商店中。

60
00:03:25,120 --> 00:03:30,120
如果你现在保存它，一切都会像以前一样工作，

61
00:03:30,720 --> 00:03:35,230
因为默认情况下，模块合并到存储中

62
00:03:35,230 --> 00:03:38,580
都合并在同一级别上，可以这么说。

63
00:03:38,580 --> 00:03:41,610
所以如果你将一个模块合并到这个商店中，

64
00:03:41,610 --> 00:03:43,830
就好像你必须找到

65
00:03:43,830 --> 00:03:45,410
所有的吸气剂等等

66
00:03:45,410 --> 00:03:46,960
直接在店里，

67
00:03:46,960 --> 00:03:49,303
就像我们几分钟前一样。

68
00:03:50,240 --> 00:03:52,610
这就是为什么我们仍然可以调度所有的动作69
00:03:52,610 --> 00:03:55,210
并像以前一样使用所有吸气剂

70
00:03:55,210 --> 00:03:58,300
即使我们现在正在使用一个模块。

71
00:03:58,300 --> 00:03:59,133
如前所述

72
00:03:59,133 --> 00:04:02,830
您当然可以拥有任意数量的模块。

73
00:04:02,830 --> 00:04:06,180
但是模块的想法并没有到此结束，

74
00:04:06,180 --> 00:04:08,063
我们可以做更多的事情。