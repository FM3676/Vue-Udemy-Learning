1
00:00:02,210 --> 00:00:06,680
我们的 TeamMembers 组件有一个潜在的缺点。

2
00:00:06,680 --> 00:00:10,593
它不仅可以通过路由加载，为什么？

3
00:00:11,570 --> 00:00:12,960
因为在代码中，

4
00:00:12,960 --> 00:00:16,680
我们最终依赖 $route，

5
00:00:16,680 --> 00:00:20,020
我们在 created 中使用它并在这里观看它。

6
00:00:20,020 --> 00:00:24,040
所以如果你想通过简单地嵌入来使用这个组件

7
00:00:24,040 --> 00:00:26,320
在另一个组件的模板中，

8
00:00:26,320 --> 00:00:28,220
假设您更改了应用程序，

9
00:00:28,220 --> 00:00:30,590
而你现在突然想以不同的方式使用它，

10
00:00:30,590 --> 00:00:32,580
或者你在不同的地方使用它，

11
00:00:32,580 --> 00:00:34,444
一次通过路由加载

12
00:00:34,444 --> 00:00:37,890
另一次通过模板中的标签使用，

13
00:00:37,890 --> 00:00:40,440
那么这将是有问题的。

14
00:00:40,440 --> 00:00:44,580
如果 TeamMembers 被这样加载可能会更好

15
00:00:44,580 --> 00:00:47,210
你得到道具

16
00:00:47,210 --> 00:00:50,420
你只是得到你的

17
00:00:50,420 --> 00:00:52,373
teamId 作为道具。

18
00:00:53,420 --> 00:00:55,530
这就是你构建这个组件的方式，

19
00:00:55,530 --> 00:00:57,820
如果它不会通过路由加载。

20
00:00:57,820 --> 00:01:00,400
您将通过道具获得 teamId

21
00:01:01,240 --> 00:01:03,310
在所有需要身份的地方，

22
00:01:03,310 --> 00:01:05,370
而不是使用这个 $route，

23
00:01:05,370 --> 00:01:10,050
你使用这个teamId，指的是那个道具

24
00:01:10,050 --> 00:01:11,850
在这里，你可以看这个

25
00:01:11,850 --> 00:01:13,853
例如，用于更改的道具。

26
00:01:14,750 --> 00:01:17,040
然后我们会在这里得到我们的 newId

27
00:01:17,040 --> 00:01:20,247
可能会将其转发给 LoadMembers。

28
00:01:20,247 --> 00:01:23,210
我们将在这里更改 LoadMembers 代码，

29
00:01:23,210 --> 00:01:27,120
不要期望路线作为参数，而是teamId，

30
00:01:27,120 --> 00:01:31,200
因此，我们现在在这里只得到了 teamId 作为参数，

31
00:01:31,200 --> 00:01:33,363
我们可以删除旧的第一行。

32
00:01:34,550 --> 00:01:36,100
但如果我们保存它就行不通了，

33
00:01:36,100 --> 00:01:39,490
我们在屏幕上什么都看不到 /t2

34
00:01:39,490 --> 00:01:41,260
如果我们打开开发者工具，

35
00:01:41,260 --> 00:01:42,730
我们看到问题是

36
00:01:42,730 --> 00:01:46,710
我们无法读取未定义的属性“成员”。

37
00:01:46,710 --> 00:01:48,190
原因应该很明显，

38
00:01:48,190 --> 00:01:50,450
teamId 应该是一个道具

39
00:01:50,450 --> 00:01:52,450
但我们正在通过路由加载它

40
00:01:52,450 --> 00:01:55,080
并且路由器默认不添加

41
00:01:55,080 --> 00:01:57,933
这个加载的组件的任何道具，

42
00:01:59,150 --> 00:02:01,360
但这是你可以改变的。

43
00:02:01,360 --> 00:02:04,500
在您的路线配置中，在这条路线上，

44
00:02:04,500 --> 00:02:06,320
这是负责的路线

45
00:02:06,320 --> 00:02:08,570
用于加载 TeamMembers 组件，

46
00:02:08,570 --> 00:02:11,070
您可以添加另一个选项，

47
00:02:11,070 --> 00:02:15,310
您可以添加 props 选项并将其设置为 true。

48
00:02:15,310 --> 00:02:17,430
这做了一件重要的事情，

49
00:02:17,430 --> 00:02:22,430
它告诉视图路由器动态参数

50
00:02:22,610 --> 00:02:25,650
应该作为道具传递到这个组件中

51
00:02:25,650 --> 00:02:29,523
而不仅仅是在 $route 属性上。

52
00:02:30,630 --> 00:02:33,380
所以现在，你会有一个名字的道具

53
00:02:33,380 --> 00:02:35,380
你在冒号后面定义，

54
00:02:35,380 --> 00:02:39,990
在我的情况下，teamId，现在是 URL 的一部分的值

55
00:02:39,990 --> 00:02:43,700
现在将作为道具传入此组件

56
00:02:43,700 --> 00:02:44,550
加载时。

57
00:02:45,680 --> 00:02:50,680
因此，如果您保存并立即重新加载，则道具为真，

58
00:02:51,040 --> 00:02:53,010
这又有效了。

59
00:02:53,010 --> 00:02:55,210
现在我们有一个优势，

60
00:02:55,210 --> 00:03:00,210
现在，这个组件 TeamMembers 更可重用，

61
00:03:00,320 --> 00:03:02,230
因为现在我们可以在任何地方使用它，

62
00:03:02,230 --> 00:03:04,460
只要我们提供这个道具，

63
00:03:04,460 --> 00:03:07,723
它不再与路由严格绑定。

64
00:03:08,570 --> 00:03:11,310
所以这只是一个替代方案，

65
00:03:11,310 --> 00:03:14,750
你可以考虑

66
00:03:14,750 --> 00:03:18,160
通过路由路由和加载组件。

67
00:03:18,160 --> 00:03:21,050
您可以使您的组件更可重用

68
00:03:21,050 --> 00:03:24,020
通过使用道具而不是 $route

69
00:03:24,020 -->00:03:25,750
即使你不打算

70
00:03:25,750 --> 00:03:27,760
在其他任何地方使用该组件？

71
00:03:27,760 --> 00:03:30,970
您可能更喜欢通过道具获取数据

72
00:03:30,970 --> 00:03:33,010
而不是必须搜索它

73
00:03:33,010 --> 00:03:35,513
在 $route parents 属性中。