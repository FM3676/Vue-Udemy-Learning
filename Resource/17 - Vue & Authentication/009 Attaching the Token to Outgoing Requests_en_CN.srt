1
00:00:01,033 --> 00:00:03,510
感谢我们的突变。

2
00:00:03,510 --> 00:00:05,807
我们将令牌存储在 UX 中，

3
00:00:05,807 --> 00:00:07,450
这当然意味着，

4
00:00:07,450 --> 00:00:10,080
我们也可以从这个应用程序的任何地方访问它

5
00:00:10,080 --> 00:00:11,840
每当我们需要它。

6
00:00:11,840 --> 00:00:15,420
我提到我们需要添加该令牌

7
00:00:15,420 --> 00:00:16,583
传出请求。

8
00:00:16,583 --> 00:00:19,652
如果这些请求的目标和点，

9
00:00:19,652 --> 00:00:23,003
Firebase 上受保护的资源。

10
00:00:24,010 --> 00:00:26,890
因此，我们可能应该在这里添加一些吸气剂

11
00:00:27,730 --> 00:00:29,510
在我们的身份验证模块中，

12
00:00:29,510 --> 00:00:30,680
令牌吸气剂，

13
00:00:30,680 --> 00:00:32,100
例如，

14
00:00:32,100 --> 00:00:35,203
我们只是返回了状态令牌。

15
00:00:36,480 --> 00:00:39,610
现在我们可以在其他模块中使用它。

16
00:00:39,610 --> 00:00:43,610
当我们向受保护的 URL 发送请求时。

17
00:00:43,610 --> 00:00:46,480
例如，对于正在行动的教练。

18
00:00:46,480 --> 00:00:48,980
当我们注册教练时，

19
00:00:48,980 --> 00:00:51,980
此处此资源当前无法访问。

20
00:00:51,980 --> 00:00:53,760
如果我们没有通过身份验证，

21
00:00:53,760 --> 00:00:55,920
好吧，这是我们可以改变的。

22
00:00:55,920 --> 00:00:59,327
如果您向 Firebase 实时数据库发送请求，

23
00:00:59,327 --> 00:01:02,100
你可以添加一个关闭令牌

24
00:01:02,100 --> 00:01:05,420
通过向此 URL 添加查询参数。

25
00:01:05,420 --> 00:01:08,560
您可以在 Firebase 官方文档中阅读这些内容。

26
00:01:08,560 --> 00:01:11,050
这里我们可以添加auth查询参数

27
00:01:11,050 --> 00:01:14,780
在此 URL 末尾的问号之后

28
00:01:14,780 --> 00:01:17,250
并将值设置为等于我们的令牌

29
00:01:17,250 --> 00:01:19,933
因为该标记最终只是一个字符串。

30
00:01:21,140 --> 00:01:23,620
所以现在我们需要我们的令牌，当然，

31
00:01:23,620 --> 00:01:26,360
所以我们可以通过访问来获得债务

32
00:01:26,360 --> 00:01:27,690
语境，

33
00:01:27,690 --> 00:01:28,860
吸气剂，

34
00:01:28,860 --> 00:01:30,340
令牌，

35
00:01:30,340 --> 00:01:31,690
就这样。

36
00:01:31,690 --> 00:01:35,320
然后我们可以将我们的令牌添加到这个 URL

37
00:01:37,440 --> 00:01:39,733
与该注册应该是可能的。

38
00:01:41,260 --> 00:01:44,350
我们已经在使用我们的用户 ID，

39
00:01:44,350 --> 00:01:47,050
现在是我们的真实用户 ID

40
00:01:47,050 --> 00:01:48,710
由 Firebase 生成。

41
00:01:48,710 --> 00:01:50,643
所以这也不是一个改进。

42
00:01:52,520 --> 00:01:54,110
现在为

43
00:01:54,110 --> 00:01:55,210
要求

44
00:01:55,210 --> 00:01:56,260
在行动下，

45
00:01:56,260 --> 00:01:58,090
这是获取请求，

46
00:01:58,090 --> 00:01:59,050
这是行不通的。

47
00:01:59,050 --> 00:02:00,810
如果我们没有令牌。

48
00:02:00,810 --> 00:02:02,810
所以在这里我们将做同样的事情。

49
00:02:02,810 --> 00:02:05,760
获取带有上下文的令牌。

50
00:02:05,760 --> 00:02:07,200
实际上我们应该使用

51
00:02:07,200 --> 00:02:11,560
rootgetters.token，

52
00:02:11,560 --> 00:02:13,780
并且还在教练的指导下。

53
00:02:13,780 --> 00:02:15,940
那应该是rootgetters

54
00:02:15,940 --> 00:02:18,850
因为我们在我们的根存储上访问它，

55
00:02:18,850 --> 00:02:20,720
不在此模块上，

56
00:02:20,720 --> 00:02:21,770
但在我们的根存储上。

57
00:02:22,860 --> 00:02:25,463
所以上下文 rootgetters 令牌它是。

58
00:02:27,460 --> 00:02:30,057
然后在这里也添加债务代币

59
00:02:30,057 --> 00:02:33,863
带问号的等于加标记。

60
00:02:35,840 --> 00:02:36,673
现在有了这个，

61
00:02:36,673 --> 00:02:38,400
如果我们保存所有这些，

62
00:02:38,400 --> 00:02:40,380
如果我去请求并重新加载，

63
00:02:40,380 --> 00:02:43,690
我们仍然失败，因为我们还没有登录。

64
00:02:43,690 --> 00:02:46,880
目前我们需要一直手动登录

65
00:02:46,880 --> 00:02:48,740
不过很快就会改变这一点，

66
00:02:48,740 --> 00:02:51,850
但是让我们回过头来输入这个

67
00:02:51,850 --> 00:02:53,293
然后登录。

68
00:02:55,340 --> 00:02:57,120
然后去请求。

69
00:02:57,120 --> 00:03:00,560
现在你看，我们没有找到适合我们的消息，

70
00:03:00,560 --> 00:03:01,660
这是有道理的，

71
00:03:01,660 --> 00:03:03,470
但我们没有收到错误。

72
00:03:03,470 --> 00:03:05,100
如果我去找所有的教练，

73
00:03:05,100 --> 00:03:07,810
我现在也可以注册为教练了。

74
00:03:07,810 --> 00:03:09,513
如果我试一试，

75
00:03:11,120 --> 00:03:14,940
我是一名网络开发人员和自由职业者，

76
00:03:14,940 --> 00:03:18,483
让我提升你的事业，

77
00:03:23,490 --> 00:03:25,630
并点击注册。

78
00:03:25,630 --> 00:03:27,640
这似乎也有效。

79
00:03:27,640 --> 00:03:29,090
如果我现在重新加载，

80
00:03:29,090 --> 00:03:30,770
这个数据还在

81
00:03:30,770 --> 00:03:33,440
因为它现在最终在实时数据库中

82
00:03:33,440 --> 00:03:34,540
在 Firebase 上

83
00:03:34,540 --> 00:03:36,240
在教练的指导下。

84
00:03:36,240 --> 00:03:40,120
我们现在看到真实的用户 ID 有一个关于教练数据的注释，

85
00:03:40,120 --> 00:03:41,163
我只是补充。

86
00:03:42,110 --> 00:03:44,150
那太好了，

87
00:03:44,150 --> 00:03:46,870
我们现在成功地附加到令牌

88
00:03:46,870 --> 00:03:48,480
传出请求，

89
00:03:48,480 --> 00:03:50,363
这是向前迈出的一大步。

90
00:03:52,340 --> 00:03:55,740
现在我们可以开始稍微处理一下 UI。

91
00:03:55,740 --> 00:03:57,810
例如，此刻我们手动

92
00:03:57,810 --> 00:04:01,190
必须输入斜线才能到达此页面，

93
00:04:01,190 --> 00:04:04,320
如果我们在导航中有一个选项会更好，

94
00:04:04,320 --> 00:04:07,700
或者也许在这里而不是注册为教练，

95
00:04:07,700 --> 00:04:09,260
如果我们需要登录，

96
00:04:09,260 --> 00:04:10,940
为了注册，

97
00:04:10,940 --> 00:04:13,400
我们可能甚至不应该显示这个按钮

98
00:04:13,400 --> 00:04:15,290
如果我们没有登录。

99
00:04:15,290 --> 00:04:16,880
所以下一步，

100
00:04:16,880 --> 00:04:18,262
我们将更新该 UI。